<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet">
    <style>
        body{
                font-family: 'Inconsolata', monospace;
                margin: 2rem;
            }
        .list{
            display: flex;
        }
        .item{
            width: 50%;
        }

    </style>
    <title>Product Offering</title>
</head>
<body>
    <h2>Acme Product Offering</h2>
    <div class="list">

    </div>
    <script>
        const productsAPI = fetch('https://acme-users-api-rev.herokuapp.com/api/products');
        const companiesAPI = fetch('https://acme-users-api-rev.herokuapp.com/api/companies');
        const offeringsAPI = fetch('https://acme-users-api-rev.herokuapp.com/api/offerings');

        Promise.all([productsAPI, companiesAPI, offeringsAPI])
        .then( response => Promise.all(response.map(ele => ele.json()))
        .then(data => {
            const products = data[0];
            const companies = data[1];
            const offerings = data[2];

            console.log(products[0], companies[0], offerings[0]);

            const product2id = products[0].id;
            const offers = offerings.filter(elem => elem.productId ===  product2id);
            
            const companuIds = offers.map(offer => offer.companyId);
            const companiesObject = companuIds.map(id => companies.filter(company => company.id === id)[0])
            const compNames = companiesObject.map(elem => elem.name);
            const prices  = offers.map(offer => offer.price);
            const catchPhrases = companiesObject.map(company => company.catchPhrase)
            console.log(catchPhrases)



            const html = products.map(ele =>
                `<div class="item">
                    <div class = 'name'>${ele.name}</div>
                </div>`
            ).join('');

            const itemList = document.querySelector('.list')
            itemList.innerHTML = html;

            













        } )
        );
    </script>
</body>
</html>
